query($owner: String!, $name: String!, $limit: Int!, $number: Int!) {
  repository(owner: $owner, name: $name) {
    issueOrPullRequest(number: $number) {
      __typename,
      ...on Issue {
        author {
          login
        }
        title
        body
        state
        updatedAt
        timelineItems(
          first: 100,
          itemTypes: [
            CROSS_REFERENCED_EVENT
            PINNED_EVENT
            UNPINNED_EVENT
            LABELED_EVENT
            RENAMED_TITLE_EVENT
            ISSUE_COMMENT
          ]
        ) {
          totalCount
          nodes {
            __typename,
            ...on CrossReferencedEvent {
              actor {
                login
              }
              source {
                ...on Issue {
                  number
                  title
                }
                ...on PullRequest {
                  number
                  title
                }
              }
              createdAt
            }
            ...on PinnedEvent {
              actor {
                login
              }
              createdAt
            }
            ...on UnpinnedEvent {
              actor {
                login
              }
              createdAt
            }
            ...on LabeledEvent {
              actor {
                login
              }
              label {
                name
              }
              createdAt
            }
            ...on RenamedTitleEvent {
              actor {
                login
              }
              previousTitle
              currentTitle
              createdAt
            }
            ...on IssueComment {
              author {
                login
              }
              body
              updatedAt
            }
          }
        }
      }
      ...on PullRequest {
        author {
          login
        }
        headRefName
        headRepository {
          owner {
            login
          }
        }
        baseRefName,
        baseRepository {
          owner {
            login
          }
        }
        title
        body
        state
        updatedAt
        timelineItems(
          first: 100
          itemTypes: [
            CONVERT_TO_DRAFT_EVENT
            READY_FOR_REVIEW_EVENT
            HEAD_REF_FORCE_PUSHED_EVENT
            BASE_REF_FORCE_PUSHED_EVENT
            PULL_REQUEST_COMMIT
            PULL_REQUEST_REVIEW
            REVIEW_REQUESTED_EVENT
            CROSS_REFERENCED_EVENT
            PINNED_EVENT
            UNPINNED_EVENT
            LABELED_EVENT
            RENAMED_TITLE_EVENT
            ISSUE_COMMENT
          ]
        ) {
          totalCount
          nodes {
            __typename
            ...on ConvertToDraftEvent {
              actor {
                login
              }
              createdAt
            }
            ...on ReadyForReviewEvent {
              actor {
                login
              }
              createdAt
            }
            ...on HeadRefForcePushedEvent {
              actor {
                login
              }
              beforeCommit {
                abbreviatedOid
              }
              afterCommit {
                abbreviatedOid
              }
              createdAt
            }
            ...on BaseRefForcePushedEvent {
              actor {
                login
              }
              ref {
                name
              }
              createdAt
            }
            ...on PullRequestCommit {
              commit {
                abbreviatedOid
                message
                statusCheckRollup {
                  state
                }
              }
            }
            ...on PullRequestReview {
              author {
                login
              }
              body
              state
              comments(first: $limit) {
                totalCount
                nodes {
                  author {
                    login
                  }
                  path
                  diffHunk
                  body
                  outdated
                  updatedAt
                }
              }
              updatedAt
            }
            ...on ReviewRequestedEvent {
              actor {
                login
              }
              requestedReviewer {
                ...on Mannequin {
                  login
                }
                ...on Team {
                  name
                }
                ...on User {
                  login
                }
              }
              createdAt
            }
            ...on CrossReferencedEvent {
              actor {
                login
              }
              source {
                ...on Issue {
                  number
                  title
                }
                ...on PullRequest {
                  number
                  title
                }
              }
              createdAt
            }
            ...on PinnedEvent {
              actor {
                login
              }
              createdAt
            }
            ...on UnpinnedEvent {
              actor {
                login
              }
              createdAt
            }
            ...on LabeledEvent {
              actor {
                login
              }
              label {
                name
              }
              createdAt
            }
            ...on RenamedTitleEvent {
              actor {
                login
              }
              previousTitle
              currentTitle
              createdAt
            }
            ...on IssueComment {
              author {
                login
              }
              body
              updatedAt
            }
          }
        }
      }
    }
  }
}
